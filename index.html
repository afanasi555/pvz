<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plants vs Zombies</title>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        canvas { display: block; margin: 0 auto; background: #cce5ff; }
        #controls { text-align: center; margin: 10px; }
        #store { position: absolute; top: 0; right: 0; background: #fff; padding: 10px; border: 1px solid #000; }
        #store button { margin: 5px; }
        #lawnmower { position: absolute; bottom: 0; width: 100%; height: 80px; background: url('https://github.com/afanasi555/pvz/blob/main/assets/res/lawnmower/lawnmower.png') no-repeat center center; background-size: cover; }
        #progress { position: absolute; top: 10px; left: 10px; font-size: 18px; background: #fff; padding: 10px; border: 1px solid #000; }
        .plant, .zombie { position: absolute; width: 80px; height: 80px; }
        #mainMenu { text-align: center; margin: 20px; }
    </style>
</head>
<body>
    <div id="mainMenu">
        <h1>Plants vs Zombies</h1>
        <button onclick="startGame()">Start Game</button>
    </div>
    <div id="controls" style="display: none;">
        <div id="progress">Coins: 50 | Suns: 0 | Lawnmower Status: Idle</div>
        <button onclick="toggleStore()">Store</button>
    </div>
    <div id="store" style="display: none;">
        <button onclick="buyPlant('sunflower')">Sunflower (50 Suns)</button>
        <button onclick="buyPlant('peashooter')">Peashooter (100 Suns)</button>
        <button onclick="closeStore()">Close Store</button>
    </div>
    <div id="lawnmower"></div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let suns = 0;
        let coins = 50;
        let plants = [];
        let zombies = [];
        let storeOpen = false;
        let plantSelected = null;

        function drawText(text, x, y) {
            ctx.fillStyle = 'black';
            ctx.font = '20px Arial';
            ctx.fillText(text, x, y);
        }

        function drawLawnmower() {
            const lawnmowerImg = new Image();
            lawnmowerImg.src = 'https://github.com/afanasi555/pvz/blob/main/assets/res/lawnmower/lawnmower.png';
            lawnmowerImg.onload = () => ctx.drawImage(lawnmowerImg, 0, canvas.height - 80, canvas.width, 80);
        }

        function startGame() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('controls').style.display = 'block';
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawLawnmower();
            drawText('Level 1', canvas.width / 2 - 40, 30);
        }

        function toggleStore() {
            storeOpen = !storeOpen;
            document.getElementById('store').style.display = storeOpen ? 'block' : 'none';
        }

        function buyPlant(plantType) {
            if (plantType === 'sunflower' && suns >= 50) {
                suns -= 50;
                plantSelected = plantType;
            } else if (plantType === 'peashooter' && suns >= 100) {
                suns -= 100;
                plantSelected = plantType;
            }
            updateProgress();
        }

        function closeStore() {
            storeOpen = false;
            document.getElementById('store').style.display = 'none';
        }

        function updateProgress() {
            document.getElementById('progress').textContent = `Coins: ${coins} | Suns: ${suns} | Lawnmower Status: Idle`;
        }

        canvas.addEventListener('click', (event) => {
            if (!storeOpen && plantSelected) {
                const rect = canvas.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                ctx.fillStyle = plantSelected === 'sunflower' ? 'yellow' : 'green';
                ctx.fillRect(x - 40, y - 40, 80, 80);
                plants.push({ type: plantSelected, x, y });
                plantSelected = null;
                updateProgress();
            }
        });

        // Simple zombie logic
        function spawnZombie() {
            const zombieImg = new Image();
            zombieImg.src = 'https://github.com/afanasi555/pvz/blob/main/assets/res/normal/zombie_norma1.png';
            zombies.push({ x: canvas.width, y: Math.random() * canvas.height, img: zombieImg });
        }

        function updateZombies() {
            zombies.forEach(zombie => {
                zombie.x -= 1;
                ctx.drawImage(zombie.img, zombie.x, zombie.y, 80, 80);
            });
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawLawnmower();
            updateZombies();
            requestAnimationFrame(gameLoop);
        }

        setInterval(spawnZombie, 5000);
        gameLoop();
    </script>
</body>
</html>
